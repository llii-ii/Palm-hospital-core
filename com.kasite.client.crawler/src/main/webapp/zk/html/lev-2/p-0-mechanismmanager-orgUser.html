<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
	    <meta name="type" content="app">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../css/general.css"/>
		<link rel="stylesheet" type="text/css" href="../../bootstrap/css/bootstrap.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/widget.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/bootstrap.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/uniform.default.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/plugins.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/uniform.default.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/style-metronic.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/style.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/common.css"/>
		<link rel="stylesheet" href="../../css/zTreeStyle.css" />
		<link rel="stylesheet" type="text/css" href="../../font-awesome/css/font-awesome.min.css"/>
		<script src="../../js/jquery-1.7.2.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/layer/layer.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/jquery.uniform.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/jquery.form.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/My97DatePicker/WdatePicker.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/jquery.pagination.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/jquery.ztree.all-3.1.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/general.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/common.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/jquery.busy.min.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/realesoft.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/Validform_v5.0.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/jquery-ui-1.9m7.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/jquery.mousewheel.min.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/jquery.mCustomScrollbar.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/jquery.spin.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<script src="../../js/jquery.bottomTipbar.js" type="text/javascript" useBase="false" charset="utf-8"></script>
		<style>
			.widget label, span {
			    font-size: 12px;
			    position: relative;
			}
			h1, .h1, h2, .h2, h3, .h3{
				margin-top:30px;
			}
			.widget {
			    margin-bottom: 15px;
			}
			.btn{
				font-size:12px;
			}
			.well{
				background:#FEFEFE;
				border:1px solid #d5d5d5;
			}
		</style>
	</head>
	<body>
	<div id="container" style="visibility: visible;">
		   <table width="100%" height="100%" cellspacing="0" cellpadding="0" style="padding: 0px;word-break:break-all">
				<tbody><tr id="containerLayoutUl">
					
					<td valign="top" style="padding: 0px;" class="main-column"><div id="mainContainer" class="divContainer">





<div id="9cd818aa-8e63-43c4-9c21-714c95581c78">
	
		<div class="widget-head">
			<span class="icon-list"></span>
			<h2>机构包含的用户</h2>
		</div>
	

	<div class="widget">
		<div class="navbar" id="search9cd818aa-8e63-43c4-9c21-714c95581c78">
			<div class="navbar-inner">
				<h6>
					搜索
				</h6>
			</div>
		</div>
		<div class="well body">
			<form id="searchForm" name="searchForm" action="/PMC/app/plugins/platform/pages/organization/user?organizationId=8730931" method="post">
				<label for="realName">用户姓名
				</label>
				<input id="realName" name="realName" type="text" value="" class="text">
				<button type="submit" class="btn">
					查找
				</button>
			</form>
		</div>
	</div>

	
		<div class="widget">
			
				
				
					<table class="table table-bordered table-hover">
	
						<!--<caption>角色列表</caption>-->
						<thead>
							<tr>
								<th scope="col">用户名</th>
								<th scope="col">用户姓名</th>
								<th scope="col">邮箱</th>
								<th scope="col">机构
								</th>
								<th scope="col">删除
								</th>
							</tr>
						</thead>
						<tbody>
							
								
									
									
										<tr>
									
								
								<th scope="row"><a href="javascript:void(0)">srxrmyy</a></th>
								<td>srxrmyy</td>
								<td></td>
								<td>
												上饶县/上饶县人民医院 <br>
									
								</td>
								<td>
										<a href="#" onclick="deleteUser(8730931);;return false;" class="uniIco deleteIco" title="删除"></a>
									
								</td>
								</tr>
							
								
									
										<tr class="odd">
									
									
								
								<th scope="row"><a href="javascript:void(0)">wjw001</a></th>
								<td>上饶市卫计委001</td>
								<td></td>
								<td>
												上饶市 <br>
									
								</td>
								<td>
										<a href="#" onclick="deleteUser(25508147);;return false;" class="uniIco deleteIco" title="删除"></a>
									
								</td>
								</tr>
							
								
									
									
										<tr>
									
								
								<th scope="row"><a href="javascript:void(0)">wjw1</a></th>
								<td>wjw1</td>
								<td></td>
								<td>
												上饶市 <br>
									
								</td>
								<td>
										<a href="#" onclick="deleteUser(17119539);;return false;" class="uniIco deleteIco" title="删除"></a>
									
								</td>
								</tr>
							
						</tbody>
					</table>
					<div class="datatable-footer">
						<div class="dataTables_info">总共：3</div>
						<div id="pagination9cd818aa-8e63-43c4-9c21-714c95581c78" class="pagination pagination-small dataTables_paginate"><li class="active prev">前一页</li><li class="active">1</li><input type="text" style="text-align:center;height:28px;line-height:28px;margin:0 2px;" id="jump-index" title="请输入正整数" size="1"><button style="height:28px;font-size:12px;line-height:22px;float:right;padding:0 5px;border:1px solid #CCC;background:#EEE;" href="#">转到</button><li class="active next">下一页</li></div>
					</div>
				
			
		</div>
		
			<button type="button" class="btn btn-primary" onclick="callSelector('/PMC/app/plugins/platform/pages/user/multiple-selector',
			document.organizationUser, '880', '570', selector_userCallBack); return false;">
				添加用户
			</button>
		

		<a class="btn" href="./p-0-mechanismmanager-orgUser.html">刷新 </a>
		<a class="btn" href="./p-0-mechanismmanager-1.html">返回 </a>
		
		
	<form id="organizationUser" name="organizationUser" action="/PMC/organization/manager/organization-user-form" method="post">

		<input type="hidden" id="organizationId" name="organizationId" value="8730931">

		<input type="hidden" id="userIds" name="userIds" value="">
	</form>
</div>
<script>

	var deleteUserId = -1;
	
	$(document).ready(function(){

		$( "#deleteUser-dialog-confirm9cd818aa-8e63-43c4-9c21-714c95581c78" ).dialog({
			resizable: false,
			height:160,
			autoOpen: false,
			modal: true,
			buttons: {
				"删除": function() {
					document.location.href = '/PMC/organization/manager/delete-user-action?userId='+ deleteUserId + "&organizationId=8730931";
					$( this ).dialog( "close" );
				},
				"取消": function() {
					$( this ).dialog( "close" );
				}
			}
		});
		
		$("#pagination9cd818aa-8e63-43c4-9c21-714c95581c78").pagination(3, {
	        items_per_page: 10,
	        current_page: 1-1,
	        num_display_entries:3,
	        num_edge_entries:2,
	        prev_text:"前一页",
			next_text:"下一页",
	        callback: function(pageNo, container){
	            if((pageNo+1)!=1) {
					//document.location.href='?pageNo=' + (pageNo+1);
	            	var url = $("#searchForm").attr("action") + '&pageNo=' + (pageNo+1);
					$("#searchForm").attr("action", url).submit();
	            }
	            return false;
	        }
		});
	});

	function selector_userCallBack(form, ra)
	{
		document.getElementById("userIds").value=ra[0];
		form.submit();	
	}

	function userMultipleSelector(id)
	{
		var url = "/PMC/app/plugins/platform/pages/user/multiple-selector?organizationId=" + id;
		showModalWindow(url, {width: '880px', height: '550px'});
	}

	function deleteUser(id)
	{
		deleteUserId = id;
		//url = /PMC/role/manager/delete-action?roleId=
		$( "#deleteUser-dialog-confirm9cd818aa-8e63-43c4-9c21-714c95581c78" ).dialog( "open" );
		return false;
	}

</script>
</div>
</td>
					
				</tr>
			</tbody></table>
		</div>
<script>
	function delete_Organization(id) {
		window.parent.delete_Organization(id);
		return false;
	}

	function checkOrganization() {
		var name = $("input#name").val();
		if (name != null && name != "") {
			$.ajax({
				async : false,
				cache : false,
				type : 'POST',
				dataType : "json",
				data : "name=" + $("input#name").val() + "&organizationId="
						+ $("#encryptId").val() + "&parentId="
						+ $("#parentId").val() + "&showCode=" + $("#showCode").val(),
				url : "/PMC/organization/manager/check-action",
				error : function() {//请求失败处理函数
					window.parent.requestError();
				},
				success : function(data) { //请求成功后处理函数。
					var result = eval("(" + data + ")");
					if (result.result == "ERROR") {
						window.parent.checkError();
					} else {
						window.parent.checkOk();
					}

				}
			});
		}
	}

	function formSubmit(oForm) {
		var name = $("input#name").val();
		if (name != null && name != "") {
			$.ajax({
				async : false,
				cache : false,
				type : 'POST',
				dataType : "json",
				data : "name=" + $("input#name").val() + "&organizationId="
						+ $("#encryptId").val() + "&parentId="
						+ $("#parentId").val() + "&showCode=" + $("#showCode").val(),
				url : "/PMC/organization/manager/check-action",
				error : function() {//请求失败处理函数
					window.parent.requestError();
				},
				success : function(data) { //请求成功后处理函数。
					var result = eval("(" + data + ")");
					if (result.result == "ERROR") {
						window.parent.checkError();
					} else {
						oForm.submit();
					}

				}
			});
		}

	}

	var isCheck = false;

	$(document)
			.ready(
					function() {
						$("#organizationForm")
								.Validform(
										{
											tiptype : 2,
											showAllError : true,
											beforeCheck : function(form) {
												var name = $("input#name").val();
												if (name != null && name != "") {
													$.ajax({
																async : false,
																cache : false,
																type : 'POST',
																dataType : "json",
																data : "name="
																		+ $(
																				"input#name")
																				.val()
																		+ "&organizationId="
																		+ $(
																				"#encryptId")
																				.val()
																		+ "&parentId="
																		+ $(
																				"#parentId")
																				.val() + "&showCode=" + $("#showCode").val(),
																url : "/PMC/organization/manager/check-action",
																error : function() {
																	window.parent
																			.requestError();
																	return false;
																},
																success : function(
																		data) {
																	var result = eval("("
																			+ data
																			+ ")");
																	if (result.result == "ERROR") {
																		isCheck = false;
																		window.parent
																				.checkError();
																	} else {

																		isCheck = true;
																	}

																}
															});
												}
												else
												{
													alert("机构名称不能为空!");
												}
												if (isCheck) {
												    if(!$("#checkbox99").attr("checked")) {
												      $("#column01").append("<option value='99' selected='true'>Text</option>");  //添加一项option
			                                        
			                                           //var temp = $("#column01").val();
			                                        }
													return true;
												} else {
													return false;
												}
											}

										});
	$("#checkbox99").click(function() {
		if($(this).attr("checked")) {
			$("#hospitalType").show()
		} else {
			$("#hospitalType").hide()
		}
	});
	firstCheckbox();
					});
					
	 function firstCheckbox(){
		if($("#checkbox99").attr("checked")) {
			$("#hospitalType").show()
		} else {
			$("#hospitalType").hide()
		}
   }
</script></div></td>
					
				</tr>
			</tbody></table>
		</div>
	</body>

	
	<script type="text/javascript">
		
	</script>
</html>
